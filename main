saudacao = function()
  local interacao
  repeat
    interacao = io.read()

    if interacao == "" then
      print("Ora, meu caro, eu ainda não posso ler sua mente! \n Pelas barbas de Merlyn, me diga algo para continuarmos!")
    else
      print("Humm... Você é interessante...🧙‍♂️")
      print("Eu sou o Chapéu Seletor, e irei lhe dizer a qual das casas de Hogwarts você se encaixará melhor. \n Agora, me responda algumas perguntas...")

      pergunta1()
    end
  until interacao ~= ""
end

pergunta1 = function()
  print("Qual seu animal de estimação favorito? \n" ..
    "Gato 🙀 \n" ..
    "Cão 🐕 \n" ..
    "Pássaro 🐦 \n" ..
    "Peixe 🐠 \n"
  )
  local resposta1 = io.read()
  if resposta1 then
    local opcao = tratamento(resposta1)
    print(opcao)
  else
    print("Não funcionou")
  end
end

tratamento = function(opcao)
  dado = string.lower(opcao)

  local lista_parte = {
    "gato",
    "cão",
    "pássaro",
    "peixe"
  }

  local lista_palavra = {
    ["gato"] = "son",
    ["cão"] = "grif",
    ["pássaro"] = "corv",
    ["peixe"] = "lufa"
  }

  for _, palavra_frase in ipairs(opcao) do
    for _, palavra_compara in ipairs(lista_parte) do
      local inicio, fim = string.find(palavra_frase, palavra_compara)

      if inicio then
        parte_encontrada = tostring(string.sub(palavra_frase, inicio, fim))
      end
    end
  end

  local palavra_encontrada = tostring(lista_palavra[parte_encontrada])
  return palavra_encontrada
end

saudacao()
